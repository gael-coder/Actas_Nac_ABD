

CREATE DATABASE ACT_NAC;
USE ACT_NAC;
CREATE TABLE PAISES (
  ID_PAIS INT  NOT NULL   IDENTITY ,
  NOM_PAIS VARCHAR(20)      ,
PRIMARY KEY(ID_PAIS));
GO



CREATE TABLE ESTADO (
  iD_ESTADO INT  NOT NULL   IDENTITY ,
  PAISES_ID_PAIS INT  NOT NULL  ,
  NOM_EST VARCHAR(20)      ,
  CONSTRAINT FK_ID_PAIS FOREIGN KEY(PAISES_ID_PAIS)
  REFERENCES PAISES(ID_PAIS),
PRIMARY KEY(iD_ESTADO));
GO




CREATE TABLE MUNICIPIO (
  iD_MUN INT  NOT NULL   IDENTITY ,
  ID_ESTADO INT  NOT NULL  ,
  NOM_MUN VARCHAR(20)      ,
   CONSTRAINT FK_ID_ESTADO FOREIGN KEY(ID_ESTADO)
  REFERENCES ESTADO(ID_ESTADO),
PRIMARY KEY(iD_MUN));
GO




CREATE TABLE COLONIA (
  iD_COL INT  NOT NULL   IDENTITY ,
  iD_MUN INT  NOT NULL  ,
  NOM_COL VARCHAR(20)    ,
  COD_POS INT      ,
  CONSTRAINT FK_ID_MUN FOREIGN KEY(ID_MUN)
  REFERENCES MUNICIPIO(ID_MUN),
PRIMARY KEY(iD_COL));
GO




CREATE TABLE DOMICILIO (
  iD_DOM INT  NOT NULL   IDENTITY ,
  ID_COL INT  NOT NULL  ,
  CALLE VARCHAR(30)    ,
  NUM_INT VARCHAR(8)    ,
  NUM_EXT VARCHAR(8)      ,
  CONSTRAINT FK_ID_COL FOREIGN KEY(ID_COL)
  REFERENCES COLONIA(ID_COL),
PRIMARY KEY(iD_DOM));
GO




CREATE TABLE OFICIALIA (
  iD_OFIC VARCHAR(30)  NOT NULL    , ---ESTE ES EL DATO CAMBIADO DE INT A VARCHAR
  iD_DOM INT  NOT NULL  ,
  CONTRASEÑA VARCHAR(20)      ,
  CONSTRAINT FK_ID_DOM FOREIGN KEY(ID_DOM)
  REFERENCES DOMICILIO(ID_DOM),
PRIMARY KEY(iD_OFIC));
GO




CREATE TABLE DATOS_ACTA (
  FOLIO INT  NOT NULL   IDENTITY ,
  iD_OFIC VARCHAR(30)  NOT NULL  , ---dato cambiado
  FECHA_REGIST DATETIME    ,
  NUM_LIBRO INT      ,
  CONSTRAINT FK_ID_OFIC FOREIGN KEY(ID_OFIC)
  REFERENCES OFICIALIA(ID_OFIC),
PRIMARY KEY(FOLIO));
GO




CREATE TABLE REGISTRADO (
  ID_REG INT  NOT NULL  IDENTITY  ,
  FOLIO INT  NOT NULL  ,
  NOMBRE VARCHAR(30)    ,
  APE_PAT VARCHAR(30)    ,
  APE_MAT VARCHAR(30)    ,
  FECHA_NAC DATETIME    ,
  SEXO VARCHAR(10)    ,
  PRESENTADO VARCHAR(10)    ,
  COMPARECIDO VARCHAR(10)      ,
  CONSTRAINT FK_ID_FOLIO FOREIGN KEY(FOLIO)
  REFERENCES DATOS_ACTA(FOLIO),
PRIMARY KEY(ID_REG));
GO

CREATE TABLE PARENTESCO (
  iD_PARENTESCO INT  NOT NULL   IDENTITY ,
  NOMBRE_ROL VARCHAR(10)      ,
PRIMARY KEY(iD_PARENTESCO));
GO


CREATE TABLE TESTIGOS (
  iD_TESTIGO INT  NOT NULL   IDENTITY ,
  iD_DOM INT  NOT NULL  ,
  ID_REG INT  NOT NULL  ,
  iD_PARENTESCO INT  NOT NULL  ,
  ID_PAIS INT  NOT NULL  ,
  NOMBRE VARCHAR(30)    ,
  APE_PAT VARCHAR(30)    ,
  APE_MAT VARCHAR(30)    ,
  SEXO VARCHAR(10)    ,
  EDAD INT      ,
  CONSTRAINT FK_ID_DOM_TEST FOREIGN KEY(ID_DOM)
  REFERENCES DOMICILIO(ID_DOM),
  CONSTRAINT FK_ID_REG FOREIGN KEY(ID_REG)
  REFERENCES REGISTRADO(ID_REG),
  CONSTRAINT FK_ID_PARENTESCO FOREIGN KEY(ID_PARENTESCO)
  REFERENCES PARENTESCO(ID_PARENTESCO),
  CONSTRAINT FK_ID_PAIS_TEST FOREIGN KEY(ID_PAIS)
  REFERENCES PAISES(ID_PAIS),
PRIMARY KEY(iD_TESTIGO));
GO





INSERT INTO PAISES (NOM_PAIS) VALUES 
('MÉXICO')

INSERT INTO ESTADO (NOM_EST, PAISES_ID_PAIS) VALUES
('COAHUILA', 1)

INSERT INTO MUNICIPIO (NOM_MUN, ID_ESTADO) VALUES
('SALTILLO', 1)

INSERT INTO COLONIA (NOM_COL, COD_POS, ID_MUN) VALUES
('REPÚBLICA', 26070, 1)

INSERT INTO DOMICILIO (CALLE, NUM_INT, NUM_EXT, ID_COL) VALUES
('OAXACA', 742, 'A', 1)

INSERT INTO OFICIALIA (iD_OFIC,iD_DOM,CONTRASEÑA)
VALUES (123,1,'TEC')